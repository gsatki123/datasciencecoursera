/* JSCmprsd Hash:57aa34117517a56b07032110c4530573 */
/** 
Copyright (c) 2013 Education.com Holdings, Inc. All Rights Reserved.
Duplication without permission prohibited.
 **/
var jsonsend=new Class({Implements:[Options,Events],options:{url:"/service/service.php",method:"get",returnFormat:"json",useWebservice:true,RequestFunction:$empty,SuccessFunction:$empty,StateChangeFunction:$empty,FailureFunction:$empty},initialize:function(A){this.setOptions(A);this.url=this.options.url;this.xhr=new Request.HTML({method:this.options.method,url:this.url,evalScripts:false,onSuccess:function(C,B,D,E){this.process(C,B,D,E)}.bind(this),onRequest:function(){this.options.RequestFunction()}.bind(this),onStateChange:function(B){this.options.StateChangeFunction(B)}.bind(this),onFailure:function(B){this.options.FailureFunction(B)}.bind(this)})},requestit:function(A){if(A&&$chk(A)){this.getdata=Hash.toQueryString(A);if(this.options.useWebservice){this.getdata+="&resf="+this.options.returnFormat}}this.xhr.send(this.getdata)},process:function(B,A,C,D){if(this.options.returnFormat=="json"){C=JSON.decode(C)}this.options.SuccessFunction(C,D,B)}});var popcontroller=new Class({Implements:[Options,Events],options:{contents:"",title:"The title",fadeStyle:"fade-white",closeClass:"closepop",opacity:0.7,initialWidth:500,initialHeight:"auto",fadeDuration:400,loadFromAjax:false,disableScroll:true,startWithLoadingBg:false,loadFromUrl:"/",loadModalName:"",callName:"",extraGetObject:{},evalresponse:true,useiframe:false,hideads:true,link:"cancel",autoreposition:true,type:"normal",fullsize:false},initialize:function(A){this.setOptions(A);if(!/^(\/)|(https?:\/\/)/i.test(this.options.loadFromUrl)){this.options.loadFromUrl="/"+this.options.loadFromUrl}if(this.options.fadeStyle=="white"){this.fadeclass="fade-white"}else{if(this.options.fadeStyle=="black"){this.fadeclass="fade-black"}else{this.fadeclass=this.options.fadeStyle}}this.showLoadingOnLoad=false;if(this.options.loadFromAjax||this.options.startWithLoadingBg){this.showLoadingOnLoad=true}if($type(this.options.contents)=="element"){this.options.contents=this.options.contents.get("html")}this.ovly=new overlay({backgroundClass:this.fadeclass,fadeDuration:this.options.fadeDuration,opacity:this.options.opacity,useiframe:this.options.useiframe,disableScroll:this.options.disableScroll});this.pop=new PopDiv({contents:this.options.contents,title:this.options.title,overlayObj:this.ovly,initialWidth:this.options.initialWidth,initialHeight:this.options.initialHeight,showLoadingOnLoad:this.showLoadingOnLoad,fullsize:this.options.fullsize});this.popped=false;if(this.options.loadFromAjax){this.jse=new jsonsend({url:this.options.loadFromUrl,returnFormat:"html",evalScripts:false,SuccessFunction:function(D,C,B){if(D){this.loadModalContents(D,C,B)}}.bind(this)})}window.removeEvents("getPop");window.addEvent("getPop",function(B){B(this)}.bind(this))},loadModalContents:function(H,G,A){if(!this.popped){return this.loadModalContents.delay(500,this,[H,G,A])}else{this.removeLoadingBg();this.setInner(H);if(this.options.autoreposition){this.reposition()}if(this.options.evalresponse&&G){G=G.replace(/<!--/gi,"");try{Browser.exec(G)}catch(F){var E={};E.message=F.message;E.stack=F.stack;for(var B in F){E[B]=F[B]}E.url=this.options.loadFromUrl;E.get=$merge(this.options.extraGetObject,{__getData:this.options.loadModalName});E.js=G;new Request.JSON({url:"/service/jserrors.php",method:"post"}).post(E)}}if(Browser.ie&&Browser.version<=6){var D=$("popdiv-inner-container").getElement("div");if(D){var C=D.getStyle("position");D.setStyle("position","absolute");(function(){D.setStyle("position",C)}).delay(100)}}return true}},popit:function(){if(window.modalopen){if(this.options.link=="cancel"){return }else{if($("popdiv")){$("popdiv").fireEvent("closeme")}}}window.modalopen=true;if(this.options.hideads){$$("div.ad").each(function(A){A.setStyle("visibility","hidden")});$$(".hide-when-modal").each(function(A){A.setStyle("visibility","hidden")})}if(Browser.ie){$$("select").setStyle("visibility","hidden")}$(document.body).fireEvent("hidetips");this.ovly.fadein();(function(){this.pop.displayDiv(this.options.type);this.popped=true;this.closebtnel=this.pop.getCloseBtn();this.popcontainer=this.pop.getContainerDiv();this.popdiv=this.pop.getPopDiv();this.closebtnel.addEvent("click",function(B){this.closeit()}.bind(this));this.popcontainer.addEvent("closeme",function(){this.closeit()}.bind(this));this.popdiv.addEvent("closeme",function(){this.closeit()}.bind(this));this.popdiv.addEvent("successfulCompletion",function(){this.fireEvent("successfulCompletion")}.bind(this));this.popdiv.addEvent("addloading",function(){this.addLoading()}.bind(this));this.popdiv.addEvent("removeloading",function(){this.removeLoading()}.bind(this));this.popdiv.addEvent("reposition",this.reposition.bind(this));if(this.options.loadFromAjax){var A;if(this.options.callName){A=$merge(this.options.extraGetObject,{__call:this.options.callName})}else{A=$merge(this.options.extraGetObject,{__getData:this.options.loadModalName})}this.jse.requestit(A)}else{this.popdiv.getElements("."+this.options.closeClass).addEvent("click",function(B){B.stop();this.closeit()}.bind(this))}if(this.options.disableScroll){document.addEvent("mousewheel",function(G){var F=true;if(Browser.ie){var E=(G.target)?G.target:$(G.srcElement);E=$(E)}else{var E=G.target}if(E&&E.get("tag")=="textarea"){var C=E.getSize();var D=E.getScroll();var B=E.getScrollSize();if(B&&B.y&&B.y>C.y){F=false;if(Browser.ie){if(G.wheel>0){if(D.y<25){F=true;E.scrollTo(0,0)}}if(G.wheel<0){if((D.y+C.y)>=(B.y-25)){F=true;E.scrollTo(0,(B.y-C.y))}}}}}if(F){G.stop();return false}return true}.bind(this));this.boundReposition=this.reposition.bind(this);window.addEvent("resize",this.boundReposition);window.addEvent("scroll",this.boundReposition)}}.bind(this)).delay(this.options.fadeDuration)},reposition:function(A){if(this.popped){this.pop.recenter();this.ovly.reposition()}},closeit:function(){if(this.popped){if(!this.onBeforeClosing()){return false}window.modalopen=false;this.fireEvent("closing");this.pop.closeDiv();this.ovly.fadeout.delay(350,this.ovly);this.popped=false;(function(){if(this.options.hideads){$$("div.ad").each(function(A){A.setStyle("visibility","visible")});$$(".hide-when-modal").each(function(A){A.setStyle("visibility","visible")})}if(Browser.ie){$$("select").setStyle("visibility","visible")}this.fireEvent("closed")}.bind(this)).delay(400);if(this.options.disableScroll){document.removeEvents("mousewheel");window.removeEvent("resize",this.boundReposition);window.removeEvent("scroll",this.boundReposition)}}},addLoading:function(){if(this.popped){this.pop.addLoading()}},removeLoading:function(){if(this.popped){this.pop.removeLoading()}},addLoadingBg:function(){if(this.popped){this.pop.addLoadingBg()}},removeLoadingBg:function(){if(this.popped){this.pop.removeLoadingBg()}},getPopInnerDiv:function(){if(this.popped){return this.pop.getInnerDiv()}},setInner:function(A){if(this.popped){this.pop.setInner(A);if(!this.popdiv){this.popdiv=this.pop.getPopDiv()}this.popdiv.getElements("."+this.options.closeClass).addEvent("click",function(B){B.stop();this.closeit()}.bind(this))}},setTitle:function(A){if(this.popped){this.pop.setTitle(A)}},onBeforeClosing:function(){return true}});var overlay=new Class({Implements:[Options,Events],options:{fadeDuration:400,backgroundClass:"fade-black",opacity:0.8,useiframe:true,disableScroll:true,iframeBackgroundcolor:"#000000",iframeOpacity:0.5,iframeDisplay:"block",iframeTop:0,iframeLeft:0,iframePosition:"absolute",iframeHeight:window.getScrollHeight()+"px",iframeWidth:window.getScrollWidth()+"px",iframeZindex:9000},initialize:function(A){this.setOptions(A);this.fullwidth=this.getFrameWidth();this.fullheight=this.getFrameHeight();if(!this.options.useiframe){}else{this.overlay=new Element("iframe",{id:"popiframe"}).inject(document.body,"bottom");this.overlay.setStyles({"background-color":"transparent",opacity:1,border:0,display:this.options.iframeDisplay,top:this.options.iframeTop,left:this.options.iframeLeft,position:this.options.iframePosition,height:0,width:0,"z-index":this.options.iframeZindex,filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"});this.overlay.setProperties({src:"javascript:void(0);",frameborder:"0",scrolling:"no"})}this.overlayinner=new Element("div",{id:"popifram-inner",events:{click:function(B){if($("popdiv")){$("popdiv").fireEvent("closeme")}}}});this.overlayinner.inject(document.body,"bottom");this.overlayinner.setStyles({"background-color":this.options.iframeBackgroundcolor,opacity:0,border:0,display:"block",position:"absolute",top:0,left:0,"z-index":9000,width:0,height:0});this.fx={overlay:new Fx.Tween(this.overlayinner,{duration:this.options.fadeDuration})};this.fx.overlay.set("opacity",0)},fadein:function(){if(this.options.useiframe){this.overlay.setStyles({top:0+"px",width:(this.getFrameWidth())+"px",height:this.getFrameHeight()+"px"})}this.reposition();this.fx.overlay.start("opacity",this.options.opacity).chain(function(){return this}.bind(this));return this},fadeout:function(){this.fx.overlay.start("opacity",this.options.opacity,0).chain(function(){this.fx.overlay.set("opacity",0);if(this.options.useiframe){this.overlay.dispose()}this.overlayinner.dispose();return this}.bind(this))},reposition:function(){this.getFrameWidth();this.getFrameWidth();if(this.overlay){if(this.options.disableScroll){this.overlay.setStyles({top:window.getScrollTop(),left:window.getScrollLeft(),width:this.fullwidth,height:this.fullheight})}else{this.overlay.setStyles({top:0,left:window.getScrollLeft(),width:this.fullwidth,height:this.fullheight})}}if(this.overlayinner){this.getFrameHeight();this.getFrameWidth();if(this.options.disableScroll){this.overlayinner.setStyles({top:window.getScrollTop(),left:window.getScrollLeft(),width:this.fullwidth,height:this.fullheight})}else{this.overlayinner.setStyles({top:0,left:window.getScrollLeft(),width:this.fullwidth,height:this.fullheight})}}},getFrameHeight:function(){if(this.options.disableScroll){this.fullheight=window.getHeight()+20}else{this.fullheight=window.getScrollHeight()}return this.fullheight},getFrameWidth:function(){if(this.options.disableScroll){this.fullwidth=window.getWidth();return this.fullwidth}else{this.fullwidth=window.getScrollWidth();if(Browser.ie&&Browser.version<=6&&window.getScrollHeight()>window.getHeight()){this.fullwidth=this.fullwidth-18}return this.fullwidth}},getFrameEl:function(){return this.overlay}});var PopDiv=new Class({Implements:[Options,Events],options:{fadeDuration:500,containerClass:"popup-wrap",containerId:"popdiv",divClass:"",divId:"",intoel:document.body,initialWidth:400,initialHeight:400,closeClass:"closeDiv",showLoadingOnLoad:false,moveable:true,fullsize:false,boxType:"default",boxMakerFns:{blue:"makeBlueBox","default":"makeDefaultBox",white:"makeWhiteBox",green:"makeGreenBox"}},initialize:function(A){this.fx={};this.setOptions(A);this.contents=this.options.contents;if($chk(this.options.overlayObj)){this.overlayObj=this.options.overlayObj}this.popped=false;this.center=new Element("div",{id:this.options.containerId,"class":this.options.containerClass}).inject(this.options.intoel,"bottom");this.center.setStyles({position:"absolute",top:0,left:0,"z-index":"9001"})},displayDiv:function(B){if(!this.container){if(!this.options.boxMakerFns[B]){B="default"}this.boxType=B;this[this.options.boxMakerFns[B]]();if(this.options.showLoadingOnLoad){this.addLoadingBg()}if(!$chk(this.popdiv)){this.popdiv=new Element("div",{id:this.options.divId,"class":this.options.divClass}).inject(this.innercontainer)}this.popdiv.set("html",this.contents);if(this.options.moveable){this.mover=new Drag.Move(this.container,{handle:this.boxheader})}}var C=((window.getHeight()-this.container.getSize().y)/2)+window.getScrollTop();var A=((window.getWidth()-this.options.initialWidth)/2)+window.getScrollLeft();if(this.options.showLoadingOnLoad){C=C-80;if(C<20){C=20}}this.container.setStyles({width:this.options.initialWidth+"px",height:"auto",top:C+"px",left:A+"px"});this.fx.container.start("opacity",1).chain(function(){this.popped=true;this.fireEvent("popped")}.bind(this));return this},makeBlueBox:function(A){this.container=new Element("div",{id:"popdiv-container","class":"popdiv-container popup-box-blue",style:"width: 100%; z-index: 9010"}).inject(this.center);this.container.setStyles({opacity:0,width:this.options.initialWidth,height:"auto"});if(!$chk(this.fx.container)){this.fx={container:new Fx.Tween(this.container,{duration:this.options.fadeDuration})};this.fx.container.set("opacity",0)}this.boxoutline=new Element("div",{id:"","class":""}).inject(this.container);this.boxtopleft=new Element("div",{id:"","class":"topleft corner"}).inject(this.boxoutline);this.boxtopright=new Element("div",{id:"","class":"topright corner"}).inject(this.boxtopleft);this.boxheader=new Element("div",{id:"","class":"box-header"}).inject(this.boxtopright);this.closebtn=new Element("a",{id:"","class":"button-close popdiv-close",href:"javascript:void(0);"}).inject(this.boxtopright);this.innercontainer=new Element("div",{id:"popdiv-inner-container","class":"popdiv-inner-container"}).inject(this.boxtopright);this.innercontainer.setStyle("position","relative");if(this.options.fullsize){this.innercontainer.addClass("fullsize nopadding")}this.boxbottom=new Element("div",{id:"","class":"popup-box-bottom"}).inject(this.boxoutline);this.boxbotleft=new Element("div",{id:"","class":"botleft corner"}).inject(this.boxbottom);this.boxbotright=new Element("div",{id:"","class":"botright corner"}).inject(this.boxbotleft)},makeWhiteBox:function(A){this.container=new Element("div",{id:"popdiv-container","class":"popdiv-container popup-box-white",style:"width: 100%; z-index: 9010"}).inject(this.center);if(this.options.background){this.container.addClass("popup-box-"+this.options.background)}this.container.setStyles({opacity:0,width:this.options.initialWidth,height:"auto"});if(!$chk(this.fx.container)){this.fx={container:new Fx.Tween(this.container,{duration:this.options.fadeDuration})};this.fx.container.set("opacity",0)}this.boxoutline=new Element("div",{id:"","class":""}).inject(this.container);this.boxtopleft=new Element("div",{id:"","class":"topleft corner"}).inject(this.boxoutline);this.boxtopright=new Element("div",{id:"","class":"topright corner"}).inject(this.boxtopleft);this.boxheader=new Element("div",{id:"","class":"box-header"}).inject(this.boxtopright);this.closebtn=new Element("a",{id:"","class":"button-close popdiv-close",href:"javascript:void(0);"}).inject(this.boxtopright);this.innercontainer=new Element("div",{id:"popdiv-inner-container","class":"popdiv-inner-container"}).inject(this.boxtopright);this.innercontainer.setStyle("position","relative");if(this.options.fullsize){this.innercontainer.addClass("fullsize nopadding")}this.boxbottom=new Element("div",{id:"","class":"popup-box-bottom"}).inject(this.boxoutline);this.boxbotleft=new Element("div",{id:"","class":"botleft corner"}).inject(this.boxbottom);this.boxbotright=new Element("div",{id:"","class":"botright corner"}).inject(this.boxbotleft)},makeGreenBox:function(A){this.container=new Element("div",{id:"popdiv-container","class":"popdiv-container popup-box-green",style:"width: 100%; z-index: 9010"}).inject(this.center);if(this.options.background){this.container.addClass("popup-box-"+this.options.background)}this.container.setStyles({opacity:0,width:this.options.initialWidth,height:"auto"});if(!$chk(this.fx.container)){this.fx={container:new Fx.Tween(this.container,{duration:this.options.fadeDuration})};this.fx.container.set("opacity",0)}this.boxoutline=new Element("div",{id:"","class":""}).inject(this.container);this.boxtopleft=new Element("div",{id:"","class":"topleft corner"}).inject(this.boxoutline);this.boxtopright=new Element("div",{id:"","class":"topright corner"}).inject(this.boxtopleft);this.boxheader=new Element("div",{id:"","class":"box-header"}).inject(this.boxtopright);this.closebtn=new Element("a",{id:"","class":"button-close popdiv-close",href:"javascript:void(0);"}).inject(this.boxtopright);this.innercontainer=new Element("div",{id:"popdiv-inner-container","class":"popdiv-inner-container"}).inject(this.boxtopright);this.innercontainer.setStyle("position","relative");if(this.options.fullsize){this.innercontainer.addClass("fullsize nopadding")}this.boxbottom=new Element("div",{id:"","class":"popup-box-bottom"}).inject(this.boxoutline);this.boxbotleft=new Element("div",{id:"","class":"botleft corner"}).inject(this.boxbottom);this.boxbotright=new Element("div",{id:"","class":"botright corner"}).inject(this.boxbotleft)},makeDefaultBox:function(A){this.container=new Element("div",{id:"popdiv-container","class":"popdiv-container ",style:"width: 100%; z-index: 9010"}).inject(this.center);this.container.setStyles({opacity:0,width:this.options.initialWidth,height:"auto"});if(!$chk(this.fx.container)){this.fx={container:new Fx.Tween(this.container,{duration:this.options.fadeDuration})};this.fx.container.set("opacity",0)}this.boxoutline=new Element("div",{id:"","class":"box-tan-header white-bg"}).inject(this.container);this.boxtopleft=new Element("div",{id:"","class":"topleft corner"}).inject(this.boxoutline);this.boxtopright=new Element("div",{id:"","class":"topright corner"}).inject(this.boxtopleft);this.boxbotleft=new Element("div",{id:"","class":"botleft corner"}).inject(this.boxtopright);this.boxbotright=new Element("div",{id:"","class":"botright corner"}).inject(this.boxbotleft);this.boxheader=new Element("div",{id:"","class":"box-header"}).inject(this.boxbotright);this.closebtn=new Element("a",{id:"","class":"button-close popdiv-close",href:"javascript:void(0);"}).inject(this.boxheader);this.title=new Element("h2",{id:"","class":""}).inject(this.boxheader);this.title.set("html",this.options.title);this.innercontainer=new Element("div",{id:"popdiv-inner-container","class":"popdiv-inner-container"}).inject(this.boxbotright);this.innercontainer.setStyle("position","relative");if(this.options.fullsize){this.innercontainer.addClass("fullsize nopadding")}},hasLoaded:function(){return this.popped},addLoading:function(){if(!this.showingloading){this.showingloading=true;this.loadingdiv=new Element("div",{id:"loadingdiv","class":"loader-dark-blue"}).inject(this.innercontainer);var A=(this.boxType=="blue")?"#e6f2f8":"#ffffff";this.loadingdiv.setStyles({position:"absolute",width:this.innercontainer.getCoordinates().width,height:this.innercontainer.getCoordinates().height,"background-color":A,top:0,left:0,opacity:0.8,"z-index":5})}},removeLoading:function(){if(this.loadingdiv){this.loadingdiv.dispose();this.showingloading=false}},addLoadingBg:function(){this.innercontainer.addClass("loader-dark-blue");if(this.innercontainer.getSize().y.toInt()<40){this.innercontainer.addClass("min-height-40")}},removeLoadingBg:function(){this.innercontainer.removeClass("loader-dark-blue");this.innercontainer.removeClass("min-height-40")},setInner:function(A){this.popdiv.set("html",A)},setTitle:function(A){if(this.title){this.title.set("html",A)}},checkHeight:function(){if(this.container.getStyle("top").toInt()<0){this.container.setStyle("top",0)}},recenter:function(){var B=((window.getHeight()-this.container.getSize().y)/2)+window.getScrollTop();var A=((window.getWidth()-this.options.initialWidth)/2)+window.getScrollLeft();if(B<0){B=0}this.container.setStyles({width:this.options.initialWidth+"px",height:"auto",top:B+"px",left:A+"px"})},closeDiv:function(){this.fx.container.start("opacity",0).chain(function(){this.center.dispose()}.bind(this))},getCloseBtn:function(){return this.closebtn},getPopDiv:function(){return this.center},getContainerDiv:function(){return this.container},getInnerDiv:function(){return this.popdiv}});var hilighter=new Class({Implements:[Options,Events],options:{parentid:"",hilightClass:"hilightme",hoverClass:"item-selected"},initialize:function(A){this.setOptions(A);this.items=$$("#"+this.options.parentid+" ."+this.options.hilightClass);this.items.each(function(C,B){C.addEvents({mouseenter:function(){C.addClass("item-selected")},mouseleave:function(){C.removeClass("item-selected")}})})}});var popuptip=new Class({Implements:[Options,Events],options:{popupOpenDelay:500,popupCloseDelay:1000,mouseVerticalOffset:18,fadeDuration:600,tipwidth:"auto",tipclass:"popuptip",centerTipClass:"centertip",tipIdPostfix:"-tipcontents",shimPaddingTop:5,shimPaddingBot:5},initialize:function(A){this.setOptions(A);this.tips={};this.openclosetimer={};this.tipbox=false;this.tipalignment=false;this.tipinner=false;this.tipfx=false;this.tiparrow=false;this.insidetip={};this.insidetiparea={};this.tiptype={};this.findpopups("all");if($H(this.tips).length){$(document.body).addEvent("hidetips",function(B){this.hideAll()}.bind(this))}$(document.body).addEvent("lookfortips",function(B){this.findpopups(B)}.bind(this))},findpopups:function(B){var A=null;if(B=="all"){A=$$("."+this.options.tipclass)}else{if(typeOf(B)=="element"){A=B.getElements("."+this.options.tipclass)}else{A=$$("#"+B+" ."+this.options.tipclass)}}A.each(function(D,E){var G=D.id+"-"+E;var H;if(D.getProperty("tipcontainer")){G=E;H=D.getProperty("tipcontainer")}else{G=D.id+"-"+E;H=D.id+this.options.tipIdPostfix}if($(H)){this.tips[G]={};this.tips[G].tipel=D;this.tips[G].tipcontainer=$(H);this.insidetip[G]=false;this.insidetiparea[G]=false;var F=this.options.popupOpenDelay;var C=this.options.popupCloseDelay;if(D.getProperty("tipopendelay")){F=D.getProperty("tipopendelay").toInt()}if(D.getProperty("tipclosedelay")){C=D.getProperty("tipclosedelay").toInt()}if(D.getProperty("tiptype")){this.tiptype[G]=D.getProperty("tiptype")}else{this.tiptype[G]="default"}D.addEvent("mouseenter",function(I){this.insidetiparea[G]=true;$clear(this.openclosetimer[G]);this.openclosetimer[G]=(function(){this.showtip(G,I)}.bind(this)).delay(F)}.bind(this));D.addEvent("mouseleave",function(I){this.insidetiparea[G]=false;$clear(this.openclosetimer[G]);if(!this.insidetip[G]){this.openclosetimer[G]=(function(){if(!this.insidetip[G]){this.hidetip(G)}}.bind(this)).delay(C)}}.bind(this))}},this)},showtip:function(A,F){if(!this.tipbox){this.makebox(A)}if(!this.shim){this.addiframeshim()}this.cancleCloseAll();this.makeeffect();this.tipbox.setStyle("display","block");this.tipbox.setStyle("visibility","hidden");this.tipbox.setStyles({position:"absolute",left:0,top:0,bottom:"",right:"","z-index":-1000,visibility:"hidden"});this.tipalignment.setStyles({position:"static",width:"auto",height:"auto"});this.tipinner.innerHTML=this.tips[A].tipcontainer.innerHTML;var H=this.tipbox.getSize().x;var M=this.tipbox.getSize().y-2;if(H==0){if(this.tipbox){this.tipbox.setStyle("display","none");this.tipalignment.setStyles({position:"static"})}if(this.shim){this.shim.setStyles({width:0,height:0,left:0,top:0})}}var J=document.id(F.target);var N=F.page.x;var L=F.page.y;var G=F.client.x;var E=F.client.y;var D=window.getWidth();var C=window.getHeight();var B="right";if((D-G)<H&&(D-G)<G){B="left"}var I="top";if((E)<(M+20)&&(E)<(C-E)){I="bottom"}if(J.hasClass(this.options.centerTipClass)){var K=J.getCoordinates();N=parseInt(K.left+(K.width/2));L=parseInt(K.top+(K.height/2))}this.tipbox.setStyles({top:L,left:N,"z-index":50000});this.tipalignment.setStyles({top:"",left:"",right:"",bottom:""});if(I=="bottom"){this.tipalignment.setStyles({top:this.options.mouseVerticalOffset})}else{this.tipalignment.setStyles({bottom:this.options.mouseVerticalOffset+5})}if(B=="left"){this.tipalignment.setStyles({left:-1*H})}else{this.tipalignment.setStyles({left:0})}this.tipalignment.setStyles({position:"absolute",width:H,height:M,visibility:"visible"});this.tiparrow.removeClass("arrow-top-left");this.tiparrow.removeClass("arrow-top-right");this.tiparrow.removeClass("arrow-bottom-right");this.tiparrow.removeClass("arrow-bottom-left");this.tiparrow.addClass("arrow-"+I+"-"+B);this.positionshim(this.tipalignment);this.fadeit(1)},hidetip:function(A){this.fadeit(0);this.openclosetimer[A]=(function(){if(this.tipbox){this.tipbox.setStyle("display","none");this.tipalignment.setStyles({position:"static"})}if(this.shim){this.hideshim()}}.bind(this)).delay(this.options.fadeDuration)},cancleCloseAll:function(){$H(this.openclosetimer).each(function(A){$clear(A)})},hideAll:function(){this.cancleCloseAll();if(this.tipbox){$H(this.tips).each(function(A,B){this.hidetip(B)},this)}},makeeffect:function(){if(!this.tipfx){this.tipfx=new Fx.Tween(this.tipbox,{duration:this.options.fadeDuration});this.tipfx.set("opacity",0)}},fadeit:function(A){if(this.tipfx){this.tipfx.cancel();this.tipfx.start("opacity",A)}},makebox:function(D){if(this.tiptype[D]=="white"){var A=new Element("div",{id:"tipboxcontainer"});var L=new Element("div",{"class":"box-white-gray-border box-white-gray-border-transp"});var E=new Element("div",{"class":"gray-border"});var G=new Element("div",{"class":"topwrap"});var N=new Element("div",{"class":"top-right corners"});var K=new Element("div",{"class":"top-left corners"});var H=new Element("div",{"class":"botwrap"});var J=new Element("div",{"class":"bot-left corners"});var C=new Element("div",{"class":"bot-right corners"});var M=new Element("div",{"class":"boxinner"});var F=new Element("div",{"class":"box-white-gray-border-arrow"})}else{var A=new Element("div",{id:"tipboxcontainer"});var L=new Element("div",{"class":"box-blue-gray-border box-blue-gray-border-transp"});var E=new Element("div",{"class":"gray-border"});var G=new Element("div",{"class":"topwrap"});var N=new Element("div",{"class":"top-right corners"});var K=new Element("div",{"class":"top-left corners"});var H=new Element("div",{"class":"botwrap"});var J=new Element("div",{"class":"bot-left corners"});var C=new Element("div",{"class":"bot-right corners"});var M=new Element("div",{"class":"boxinner"});var F=new Element("div",{"class":"box-blue-gray-border-arrow"})}L.inject(A);E.inject(L);G.inject(E);K.inject(G);N.inject(G);H.inject(E);J.inject(H);C.inject(H);M.inject(E);F.inject(L);var I=this.options.tipwidth;if(this.tips[D].tipcontainer.getStyle("width")){var B=this.tips[D].tipcontainer.getStyle("width");if(!isNaN(B.toInt())&&B.toInt()!=0){I=this.tips[D].tipcontainer.getStyle("width").toInt()}}M.setStyles({width:I});A.setStyles({position:"absolute","z-index":50000});A.inject(document.body,"bottom");this.tipbox=A;this.tipinner=M;this.tipalignment=L;this.tiparrow=F;this.topwrap=G;this.botwrap=H;A.addEvent("mouseenter",function(){this.cancleCloseAll();this.insidetip[D]=true}.bind(this));A.addEvent("mouseleave",function(){$clear(this.openclosetimer[D]);this.insidetip[D]=false;if(!this.insidetiparea[D]){this.openclosetimer[D]=(function(){if(!this.insidetiparea[D]){this.hidetip(D)}}.bind(this)).delay(this.options.popupCloseDelay)}}.bind(this));A.addEvent("cancelclose",function(){this.cancleCloseAll()}.bind(this))},addiframeshim:function(){this.shim=new Element("iframe",{id:"popiframe"}).injectInside(document.body);this.shim.setStyles({"background-color":"transparent",opacity:1,border:0,display:"block",top:0,left:0,position:"absolute",height:0,width:0,"z-index":49000,filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"});this.shim.setProperties({src:"javascript:void(0);",frameborder:"0",scrolling:"no"})},positionshim:function(A){var B=A.getCoordinates();this.shim.setStyles({width:B.width,height:(B.height+this.options.shimPaddingBot+this.options.shimPaddingTop),left:B.left,top:(B.top-this.options.shimPaddingTop)})},hideshim:function(){this.shim.setStyles({width:0,height:0,left:0,top:0})}});if($type(window.equalize)!="function"){function equalize(F){F=F||$(document.body);if(!F){return false}var A=F.getElements(".equality-2");for(var D=0;D<A.length;D=D+2){if(A[D]&&A[D+1]){var G=A[D].getComputedSize(),H=A[(D+1)].getComputedSize();if(G.totalHeight!=H.totalHeight){var I=D,C=D+1;if(G.totalHeight>H.totalHeight){var I=D+1,C=D,E=H;H=G;G=E}var B=H.totalHeight-G["padding-top"]-G["padding-bottom"]-G["border-top-width"]-G["border-bottom-width"];if(B-G.height<30){A[I].setStyle("height",B)}else{new Fx.Morph(A[I],{duration:180,wait:false}).start({height:B})}}}}}}window.addEvent("domready",function(){var A=new popuptip();equalize();window.addEvent("equalize",equalize)}.bind(this));var SmartLoader=new Class({Implements:[Options,Events],options:{parentElementId:document.body,classOptional:false,smartLoadClass:"smartload",smartSrcAttribute:"_src",loadingImage:"/themes/sky/i/widgets/loader-dark-blue.gif",showLoadingImage:false,fadeIn:true,dontWatchWindowClass:"dontwatchwindow",dontRemoveSizeClass:"keepsize",ignoreHiddenImagesClass:"ignorehidden",watchWindowEvents:true},initialize:function(A){this.setOptions(A);this.parentel=$(this.options.parentElementId);var B="img";if(!this.options.classOptional){B+="."+this.options.smartLoadClass}B+="["+this.options.smartSrcAttribute+"][src]";this.images=this.parentel.getElements(B);this.loaded=[];this.loading=[];this.smartsrcs=[];this.actualsrcs=[];this.removeSize=[];this.ypositions={};if(this.images.length>0){this.images.each(function(C,D){this.smartsrcs[D]=C.getProperty(this.options.smartSrcAttribute);this.actualsrcs[D]=C.getProperty("src");this.loaded[D]=(this.smartsrcs[D]==this.actualsrcs[D])?true:false;this.loading[D]=false;C.addEvent("visible",this.loadme.bind(this,D));if(!C.hasClass(this.options.dontWatchWindowClass)){this.ypositions[D]=C.getPosition(this.parentel).y}this.removeSize[D]=(C.hasClass(this.options.dontRemoveSizeClass))?false:true},this);if(this.options.showLoadingImage){this.loaderimg=new Image().src=this.options.loadingImage}this.yposhash=new Hash(this.ypositions);if(this.options.watchWindowEvents){window.addEvent("scroll",this.checkVisible.bindWithEvent(this));window.addEvent("resize",this.checkVisible.bindWithEvent(this))}window.addEvent("repositionedImages",this.getYPos.bind(this,true));window.addEvent("recheckIfVisible",this.checkVisible.bind(this));this.checkVisible()}},checkVisible:function(){var A=window.getScroll().y+window.getSize().y;var B=0;if(this.parentel.get("tag")!="body"){B=this.parentel.getPosition().y}this.yposhash.each(function(D,C){if((D+B)<=A&&(!this.images[C].hasClass(this.options.ignoreHiddenImagesClass)||D!=0)){this.loadme(C)}},this)},getYPos:function(A){this.ypositions={};this.images.each(function(B,C){if(!this.loaded[C]){if(!B.hasClass(this.options.dontWatchWindowClass)){this.ypositions[C]=B.getPosition(this.parentel).y}}},this);this.yposhash=new Hash(this.ypositions);if(A){this.checkVisible()}},loadme:function(A){if(!this.loaded[A]&&!this.loading[A]){this.loading[A]=true;if(this.options.showLoadingImage&&this.loaderimg&&this.loaderimg.src){this.images[A].src=this.loaderimg.src}if(this.smartsrcs[A]){var B=new Image();if(this.options.fadeIn){this.images[A].setStyle("opacity",0)}B.src=this.smartsrcs[A];if(B.complete){this.postload(A)}else{B.onload=function(){this.postload(A)}.bind(this)}}}},postload:function(A){this.loaded[A]=true;this.loading[A]=false;if(this.removeSize[A]){this.images[A].setStyles({height:"",width:""})}this.images[A].src=this.smartsrcs[A];this.yposhash.erase(A);if(this.options.fadeIn){this.images[A].fade("in")}}});window.addEvent("domready",function(D){var A=new SmartLoader();$$(".getformkey").each(function(F,H){var E=new jsonsend({SuccessFunction:function(J){if(J&&$chk(J)&&J.key){var I=new Element("input",{name:"formkey",type:"hidden",value:J.key});I.inject(F)}}});var G=F.name;E.requestit({sn:"formtools",f:"gfk",fon:G})});if($("messagestack")&&$("content")){var C=new Fx.Tween($("messagestack"),{duration:800,transition:Fx.Transitions.Quart.easeOut});var B=new Fx.Slide($("messagestack"),{duration:500});(function(){C.start("opacity",0).chain(function(){B.slideOut().chain(function(){$("messagestack").dispose()})})}).delay(7000,this)}$$(".fixemail").each(function(G,H){if(G.get("tag")=="a"&&G.get("href").substr(0,7)=="mailto:"){G.set("href",G.get("href").replace(" AT ","@").replace(" DOT ","."));G.set("text",G.get("text").replace(" AT ","@").replace(" DOT ","."));G.removeClass("fixemail")}else{var F=G.get("text").replace(" AT ","@").replace(" DOT ",".");var E=new Element("a",{href:"mailto:"+F,html:F});E.replaces(G)}})});if($type(textareacontrol)!="class"){var textareacontrol=new Class({Implements:[Options,Events],options:{lineheight:0,anitime:300,autogrow:true,maxheight:0,growclass:"growme",growparents:true,enterexpandsclass:"stopenter",entersubmitsclass:"entersubmits",replaceghosttextclass:"replaceghosttext",ghosttextattr:"ghosttext",ghostclassattr:"ghostclass",limitchars:"",parentdepth:6},initialize:function(A){this.setOptions(A);this.textareas={};if(this.options.autogrow){$$("textarea").each(function(E,C){if(E.hasClass(this.options.growclass)){var B=false;var F=false;var D=false;if(E.hasClass(this.options.enterexpandsclass)){B=true}if(E.hasClass(this.options.entersubmitsclass)){F=true}if(E.hasClass(this.options.replaceghosttextclass)){D=true}this.textareas[C]=new textarearesizer({el:E,anitime:this.options.anitime,maxsize:this.options.maxheight,lineheight:this.options.lineheight,growparents:this.options.growparents,parentdepth:this.options.parentdepth,stopenter:B,entersubmits:F,ghosttext:D},this.options)}},this)}}})}window.addEvent("domready",function(){var A=new textareacontrol()});var textarearesizer=new Class({Implements:Options,initialize:function(B,A){this.setOptions(A);this.el=B.el;this.growparents=B.growparents;this.parentdepth=B.parentdepth;this.startsize=this.el.getSize().y;this.anitime=B.anitime;this.resizer=new Fx.Tween(this.el,{duration:this.anitime});this.maxsize=B.maxsize;if(this.maxsize==0){this.maxsize=this.el.getProperty("rel");if(!this.maxsize||this.maxsize==""||this.maxsize==null){this.maxsize=10000}}this.reachedmax=false;this.lineheight=this.el.getParent().getStyle("line-height");this.origsize=this.el.getSize().y;this.el.setStyle("overflow","hidden");if(B.stopenter){this.el.addEvent("keydown",function(C){if(C.key=="enter"){C.stop();if(B.entersubmits){this.submitform()}}}.bind(this))}if(B.ghosttext){this.ghosttext=this.el.getProperty(this.options.ghosttextattr);this.ghostclass=this.el.getProperty(this.options.ghostclassattr);if(this.ghosttext){this.el.addEvent("focus",function(C){if(this.el.value==this.ghosttext){this.el.value="";if(this.ghostclass){this.el.removeClass(this.ghostclass)}}}.bind(this));this.el.addEvent("blur",function(C){if(this.el.value==""){this.el.value=this.ghosttext;if(this.ghostclass){this.el.addClass(this.ghostclass)}}}.bind(this))}}this.el.addEvent("keyup",function(C){this.checksize(C)}.bind(this));this.checksize()},checksize:function(C){var B=this.el.getSize();var A=this.el.getScrollSize();if(A.y>B.y){this.resizeit(B,A)}},resizeit:function(A,D){var B=D.y;if(D.y>this.maxsize){B=this.maxsize;this.el.setStyle("overflow","visible");this.reachedmax=true}if(!this.reachedmax){var C=B-this.startsize;this.startsize=B;this.resizer.start("height",B);this.resizeparents(this.el,0,C)}},resizeparents:function(C,A,B){if(A<this.parentdepth){var D=C.getParent();if(D){if(D.style.height&&D.style.height!=""){D.setStyle("height",(D.getStyle("height").toInt()+B))}return this.resizeparents(D,(A+1),B)}return true}else{return true}},submitform:function(){var B=this.getformel(this.el);if(B){var A=B.getProperty("name");document[A].submit()}},getformel:function(A){return A.getParent("form")}});if($type(textlimitercontrol)!="class"){var textlimitercontrol=new Class({Implements:[Options,Events],options:{limitproperty:"limitchars",showlimitproperty:"showlimiton",showdividproperty:"showlimitindiv",numberdivproperty:"numberdiv"},initialize:function(A){this.setOptions(A);this.textlimiters={};$$("textarea").each(function(G,E){if(G.getProperty(this.options.limitproperty)){var F=G.getProperty(this.options.limitproperty).toInt();var H=G;var C="";var D=false;var B="";if(G.getProperty(this.options.showlimitproperty)){var D=G.getProperty(this.options.showlimitproperty).toInt()}if(G.getProperty(this.options.showdividproperty)){var B=G.getProperty(this.options.showdividproperty)}if(G.getProperty(this.options.numberdivproperty)){var C=G.getProperty(this.options.numberdivproperty)}this.textlimiters[E]=new textlimiter({inputdiv:G.id,limit:12,numberdiv:C,showlimit:D,showdiv:B})}else{}},this)}});window.addEvent("domready",function(){var A=new textlimitercontrol()})}if($type(textlimiter)!="class"){var textlimiter=new Class({Implements:[Options,Events],options:{inputdiv:"",limit:false,numberdiv:"",showlimit:false,showdiv:""},initialize:function(A){this.setOptions(A);if(this.options.inputdiv!=""){this.limitbox=$(this.options.inputdiv)}if(this.options.numberdiv!=""){this.counter=$(this.options.numberdiv)}this.showlimit=this.options.showlimit;this.showdiv=(this.options.showdiv=="")?false:$(this.options.showdiv);if(!this.options.limit&&this.counter){this.options.limit=Number(this.counter.get("text"))}if(this.limitbox){this.limitbox.addEvent("keydown",function(B){this.currentvalue=this.limitbox.value;this.checkinput(B,true)}.bind(this));this.limitbox.addEvent("keyup",function(B){this.checkinput(B,false)}.bind(this));if(this.limitbox.value){this.currentvalue=this.limitbox.value;this.checkinput()}}},checkinput:function(B,A){this.checklength(B,A);if(this.counter){this.counter.set("text",this.options.limit-this.limitbox.value.length)}if(this.showlimit&&this.showdiv){if(this.options.limit-this.limitbox.value.length<=this.showlimit){this.showdiv.setStyle("display","inline")}else{this.showdiv.setStyle("display","none")}}},checklength:function(B,A){if(this.limitbox.value.length>=this.options.limit){this.trimit(B,A)}},trimit:function(E,B){if(E){var C=false;var A=this.limitbox.getScroll().y;if(E.key!="delete"&&E.key!="backspace"&&E.key!="up"&&E.key!="down"&&E.key!="left"&&E.key!="right"&&E.key!="!"&&E.key!="$"&&E.key!='"'&&E.key!="#"){E.stop();if(this.limitbox.value.length>this.options.limit){C=true;if(this.currentvalue.length==this.options.limit){this.limitbox.value=this.currentvalue}else{this.limitbox.value=this.limitbox.value.substring(0,this.options.limit)}}}}else{if(this.currentvalue.length==this.options.limit){this.limitbox.value=this.currentvalue}else{this.limitbox.value=this.limitbox.value.substring(0,this.options.limit)}}if(this.limitbox.getStyle("overflow")!="hidden"){var D=this.limitbox.getScroll().y;if(A!=D){if(!$chk(this.scrollit)){this.scrollit=new Fx.Scroll(this.limitbox,{duration:0})}this.scrollit.start(0,A)}}}})}if($type(doubleclickr)!="class"){var doubleclickr=new Class({Implements:[Options,Events],options:{parentid:"content",clickclass:false,clickid:false,replacewithimage:true,replaceimage:"/themes/sky/i/widgets/loader-dark-orange.gif",replacecontainerclass:false,replacecontainerid:false,loadingtitle:"please wait..."},initialize:function(A){this.setOptions(A);this.clickedon=[];this.replaced=[];this.elements=[];if($(this.options.parentid)){if(this.options.clickclass){this.elements=$$("#"+this.options.parentid+" ."+this.options.clickclass);this.elements.each(function(B,C){this.clickedon[C]=false;this.replaced[C]=false;B.addEvent("click",function(D){this.watchme(C,D)}.bind(this));B.addEvent("disable",function(D){this.addSpinneretc(C)}.bind(this));B.addEvent("enable",function(D){this.resetit(C)}.bind(this))},this)}else{if(this.options.clickid){this.elements[0]=$(this.options.parentid).getElement("#"+this.options.clickid);this.thisel=this.elements[0];this.clickedon[0]=false;this.replaced[0]=false;this.thisel.addEvent("click",function(B){this.watchme(0,B)}.bind(this));this.thisel.addEvent("disable",function(B){this.addSpinneretc(0)}.bind(this));this.thisel.addEvent("enable",function(B){this.resetit(0)}.bind(this))}}}},watchme:function(A,B){if(this.clickedon[A]){B.stop()}else{this.clickedon[A]=true;if(this.options.replacewithimage){this.addSpinneretc(A)}this.resetit.delay(10000,this,A)}},addSpinneretc:function(C){if(this.options.replacecontainerid){this.replaced[C]=$(this.options.replacecontainerid)}else{this.replaced[C]=this.elements[C].getParent()}var E=this.replaced[C].getSize();var F=this.replaced[C].getStyle("margin-left").toInt();var B=E.x+F+this.replaced[C].getStyle("margin-right").toInt();var A=E.y+F+this.replaced[C].getStyle("margin-bottom").toInt();this.overlaydiv=new Element("div");this.overlaydiv.setStyles({opacity:0.6,width:B+"px",height:A+"px",position:"absolute",top:0,left:"-"+F+"px","background-color":"#fff","text-align":"center"}).inject(this.replaced[C]);this.loaderdiv=new Element("div",{"class":"spanner-wrap"});this.loaderdiv.setStyles({"float":"left"}).inject(this.replaced[C],"after");var D=new Element("img",{src:this.options.replaceimage,events:{load:function(){D.addClass("loadingimg");D.setProperty("title",this.options.loadingtitle);D.inject(this.loaderdiv)}.bind(this)}})},resetit:function(A){this.clickedon[A]=false;if(this.options.replacewithimage){if(this.loaderdiv){this.loaderdiv.dispose();this.overlaydiv.dispose()}}}})}var addOverflowEllipsis=new Class({Implements:[Options,Events],options:{addOverflowEllipsisClass:"add-overflow-ellipsis"},initialize:function(B){var A=$$("div."+this.options.addOverflowEllipsisClass);A.each(function(D,C){orig_width=D.getSize().x;orig_text=D.get("text").trim();estimated_max_length=(orig_width/10).toInt();if(orig_text.length>estimated_max_length){temp=new Element("span",{html:orig_text,styles:{visibility:"hidden"}});$(document.body).adopt(temp);if(temp.getSize().x>orig_width){new_length=estimated_max_length;orig_width-=10;while(temp.getSize().x>orig_width){new_length--;new_text=orig_text.substr(0,new_length)+"...";temp.set("html",new_text)}orig_html=D.get("html");pos=orig_html.lastIndexOf(orig_text);orig_first=orig_html.slice(0,pos);orig_second=orig_html.slice(pos);new_second=orig_second.replace(orig_text,new_text);new_html=orig_first+new_second;D.set("html",new_html)}temp.dispose()}})}});window.addEvent("domready",function(){var A=new addOverflowEllipsis()});var FadeHover=new Class({Implements:[Options,Events],options:{duration:500,originalColor:false,extraElements:false},initialize:function(D,C,B,A){this.setOptions(A);this.hoverColor=B||"#e1f5cf";this.parentEl=$(D);if(this.parentEl){this.hovers=this.parentEl.getElements(C);if(this.hovers&&this.hovers.length>0){this.hovers.each(function(E,F){this.addEffects(E)}.bind(this))}}this.parentEl.addEvent("addNewHoverFx",this.addEffects.bind(this))},addEffects:function(A){var C=(this.options.extraElements)?A.getElements(this.options.extraElements):null;var B=(this.options.originalColor)?this.options.originalColor:A.getStyle("background-color");A.set("tween",{duration:this.options.duration,link:"cancel"}).addEvents({mouseenter:function(){A.tween("background-color",this.hoverColor);this.fireEvent("enter",[A,C])}.bind(this),mouseleave:function(){A.tween("background-color",B);this.fireEvent("leave",[A,C])}.bind(this)})}});var SlideShowBox=new Class({Implements:[Options,Events],options:{slideClass:"slideshow-slides",containerClass:"slideshow-contents",leftArrowClass:"ssb-left-arrow",rightArrowClass:"ssb-right-arrow",disabledArrowClass:"disabled",showingSlideClass:"nowshowing",currentSlideCounterClass:"currentslide",loadingSlideClass:"loading",createControls:false,controlAreaClass:"controls",controlItemClass:"jump",controlItemShowing:"nowshowing",animateControls:true,animateControlsHeight:20,transitionFx:"fade",fadeDuration:600,fadeDelay:200,autoAdjustHeights:true,adjustHeightDuration:400,onlyGrow:false,autoplay:false,smartAutoPlay:true,loops:null,controlVideoSlides:true,showdelaytime:5000,rotate:false},initialize:function(E,B){this.setOptions(B);this.parentEl=$(E);if(!this.parentEl){return }this.slides=this.parentEl.getElements("."+this.options.slideClass);this.currentCounter=(this.options.currentSlideCounterClass)?this.parentEl.getElement("."+this.options.currentSlideCounterClass):false;this.slideContainer=this.parentEl.getElement("."+this.options.containerClass);this.controlWrap=this.parentEl.getElement("."+this.options.controlAreaClass);this.videos=[];this.useControls=((this.controlWrap&&this.controlWrap.getElements("."+this.options.controlItemClass))||D)?true:false;var D=(this.controlWrap&&this.options.createControls&&!this.controlWrap.getElement("."+this.options.controlItemClass))?true:false;if(this.useControls){this.jumpTos=[]}if(this.slides&&this.slides.length){this.fxs=[];this.currentHeight=(this.slideContainer.style&&this.slideContainer.style.height)?this.slideContainer.getStyle("height"):false;var G=currentWidth=this.slideContainer.getSize(),A={position:"relative"};if(!this.currentHeight){this.currentHeight=G.y-this.slideContainer.getStyle("padding-top").toInt()-this.slideContainer.getStyle("padding-bottom").toInt();A.height=this.currentHeight}if(!this.slideContainer.style||!this.slideContainer.style.width){A.width=G.x}this.slideContainer.setStyles(A);if(this.options.autoAdjustHeights){this.slideContainer.set("tween",{link:"cancel",duration:this.options.adjustHeightDuration})}var F=0;this.isanimating=false;this.slides.each(function(H,I){if(H.hasClass(this.options.showingSlideClass)){F=I}},this);this.currentSlide=F;this.totalSlides=this.slides.length;this.currentSlideEl=this.parentEl.getElement("."+this.options.currentSlideCounterClass);if(this.options.leftArrowClass){this.left=this.parentEl.getElement("."+this.options.leftArrowClass);if(this.left){this.left.addEvent("click",function(){this.stopplay();this.prevSlide()}.bind(this))}}if(this.options.rightArrowClass){this.right=this.parentEl.getElement("."+this.options.rightArrowClass);if(this.right){this.right.removeClass(this.options.disabledArrowClass);this.right.addEvent("click",function(){this.stopplay();this.nextSlide()}.bind(this))}}if(this.options.autoplay){this.autoplay();this.paused=false}var C=this.slides[F].getSize().x-this.slides[F].getStyle("border-left").toInt()-this.slides[F].getStyle("border-right").toInt();this.slides.each(function(I,J){if(J!==F){I.setStyles({position:"absolute",left:0,top:0,visibility:"hidden",opacity:0,display:"",width:C})}if(this.options.autoplay&&this.options.smartAutoPlay){I.addEvents({mouseenter:function(Q){if(this.slideshow&&!this.paused){this.stopplay();this.paused=true}}.bind(this),mouseleave:function(Q){if(this.paused&&this.options.autoplay){this.autoplay();this.paused=false}}.bind(this),click:function(Q){this.stopplay();this.paused=false}.bind(this)})}if(D){this.jumpTos[J]=new Element("a",{"class":this.options.controlItemClass,href:"#",title:"Jump to slide "+(J+1),html:(J+1),styles:{position:"relative",top:this.options.animateControlsHeight+"px",opacity:0}});if(this.currentSlide==J){this.jumpTos[J].addClass(this.options.controlItemShowing)}this.jumpTos[J].addEvent("click",function(R,Q){if(R){R.stop()}if(this.currentSlide!=J){this.stopplay();this.changeToSlide(J,Q)}}.bind(this)).inject(this.controlWrap);var L=300*J+500;(function(){this.jumpTos[J].morph({top:0,opacity:1})}).delay(L,this);if(J==this.slides.length-1){this.fireEvent.delay(L,this,"controlsLoaded")}}if(this.options.controlVideoSlides&&I.getElement("video")){var M=I.getElement("video");if(!M.hasClass("video-js")&&!M.hasClass("vjs-tech")){var N=M.getProperty("poster"),O=M.getProperty("width"),K=M.getProperty("height"),H=new Element("div",{"class":"playbutton cursor-pointer"});if(N){this.videos[J]=I.get("html");I.empty();I.adopt(new Element("div",{"class":"relative replacement-poster cursor-pointer",styles:{width:O+"px",height:K+"px",background:"transparent url("+N+") no-repeat 0 0"}}),H);var P=H.getSize();H.setStyles({top:Math.round((K-P.y)/2)+"px",left:Math.round((O-P.x)/2)+"px"});I.addEvent("click",function(T){if(!I.getElement("video")){I.empty().set("html",this.videos[J]);var Q=I.getElement("video");if(Q.play){Q.play();Q.onended=function(){if(this.options.autoplay&&!this.slideshow){this.autoplay()}}.bind(this);if(Browser.chrome){var S=Q.getProperty("data-duration");if(S){(function(){if(this.options.autoplay&&!this.slideshow){this.autoplay()}}).delay((S.toInt()+1)*1000,this)}}}else{var R=Q.getProperty("data-youtube");if(R){if(R.test(/\?v=/i)&&R.test("youtube.com")){v=R.split("?v=")[1];if(v.test("&")){v=v.split("&")[0]}var U='<iframe width="'+O+'" height="'+K+'" src="http://www.youtube.com/embed/'+v+'?hd=1&autoplay=1&egm=0&rel=0&wmode=transparent" frameborder="0" allowfullscreen autoplay="1" hd="1"></iframe>'}else{var U='<iframe width="'+O+'" height="'+K+'" src="'+R+'" frameborder="0" allowfullscreen autoplay="1" hd="1"></iframe>'}Q.getParent().empty().set("html",U)}var S=Q.getProperty("duration");if(S){(function(){if(this.options.autoplay&&!this.slideshow){this.autoplay()}}).delay((S.toInt()+2)*1000,this)}}}}.bind(this))}}}this.parentEl.addEvents({autoplay:function(){if(!this.slideshow){this.autoplay()}}.bind(this),pauseplay:function(Q){if(this.slideshow&&Q){this.stopplay();this.autoplay.delay(Q,this)}}.bind(this),stopplay:function(){this.stopplay()}.bind(this)})},this)}if(this.useControls&&!D){this.jumpTos=this.controlWrap.getElements("."+this.options.controlItemClass);if(this.jumpTos){this.jumpTos.each(function(H,I){H.addEvent("click",function(K,J){if(K){K.stop()}if(this.currentSlide!=I){this.stopplay();this.changeToSlide(I,J)}}.bind(this));if(I==this.currentSlide){H.addclass(this.options.controlItemShowing)}},this)}}},prevSlide:function(){if(this.currentSlide>0){this.changeToSlide(this.currentSlide-1)}else{if(this.options.rotate&&this.currentSlide==0){this.changeToSlide(this.totalSlides-1)}}},nextSlide:function(){if(this.currentLoop&&this.slideshow&&this.options.loops){if(this.currentLoop-1>=this.options.loops){this.stopplay();return }}if(this.currentSlide<(this.totalSlides-1)){if(this.currentLoop){this.currentLoop=parseFloat(Math.floor(this.currentLoop)+"."+(this.currentSlide+2))}this.changeToSlide(this.currentSlide+1)}else{if(this.options.rotate&&this.currentSlide==(this.totalSlides-1)){if(this.currentLoop){this.currentLoop=parseFloat(Math.floor(this.currentLoop+1)+"."+1)}this.changeToSlide(0)}}},changeToSlide:function(B,A){if(this.useControls&&this.jumpTos){this.jumpTos[this.currentSlide].removeClass(this.options.controlItemShowing);this.jumpTos[B].addClass(this.options.controlItemShowing)}if(this.options.transitionFx=="slide"){this.slideChange(B,A)}else{this.fadeChange(B,A)}},slideChange:function(B,A){if(window.console&&window.console.log){console.log("not supported yet")}this.fadeChange(B,A)},fadeChange:function(C,B){var E=this.currentSlide;if(B){this.slides[E].setStyles({opacity:0,display:"none"});this.currentSlide=C;this.slides[C].setStyles({display:"",visibility:"hidden",opacity:0});this.adjustParentHeight(C,true);this.slides[C].setStyles({opacity:1,visibility:"visible"});if(this.currentCounter){this.currentCounter.set("text",this.currentSlide+1)}this.disableEnableButtons();this.fireEvent("slideChanged",[this.slides[C],this.currentSlide])}else{if(this.isanimating){this.fxs.each(function(F){F.cancel()})}this.isanimating=true;if(!this.fxs[E]){this.fxs[E]=new Fx.Morph(this.slides[E],{duration:this.options.fadeDuration,link:"cancel"})}this.fxs[E].start({opacity:0}).chain(function(){if(E!=this.currentSlide){this.slides[E].setStyle("display","none")}}.bind(this));this.currentSlide=C;this.slides[C].setStyles({display:"",visibility:"visible",opacity:0});if(!this.fxs[C]){this.fxs[C]=new Fx.Morph(this.slides[C],{duration:this.options.fadeDuration,link:"cancel"})}var D=this.options.fadeDelay;if(this.options.autoAdjustHeights){var A=this.adjustParentHeight(C);if(A){D=(D>(this.options.adjustHeightDuration+A))?(D):(this.options.adjustHeightDuration+A)}}(function(){this.fxs[this.currentSlide].start({opacity:1}).chain(function(){this.isanimating=false}.bind(this));if(this.currentCounter){this.currentCounter.set("text",this.currentSlide+1)}this.disableEnableButtons();this.fireEvent("slideChanged",[this.slides[C],this.currentSlide])}).delay(D,this)}},autoplay:function(){if(!this.currentLoop){this.currentLoop=1.1}this.slideshow=this.nextSlide.periodical(this.options.showdelaytime,this)},stopplay:function(){if(this.slideshow){$clear(this.slideshow);this.slideshow=false}},adjustParentHeight:function(D,C){var A=this.slides[D].getSize().y;if(A>this.currentHeight||(A<this.currentHeight&&!this.options.onlyGrow)){if(C){this.slideContainer.setStyle("height",A);this.currentHeight=A;return 0}else{var B=(A<this.currentHeight)?this.options.fadeDuration:1;(function(){this.slideContainer.tween("height",A)}).delay(B,this);this.currentHeight=A;return B}}return false},disableEnableButtons:function(){if(this.left&&this.right){if(this.currentSlide===0){this.left.addClass(this.options.disabledArrowClass);this.right.removeClass(this.options.disabledArrowClass)}if(this.currentSlide===1){this.left.removeClass(this.options.disabledArrowClass)}if(this.currentSlide===(this.totalSlides-2)){this.right.removeClass(this.options.disabledArrowClass)}if(this.currentSlide===(this.totalSlides-1)){this.right.addClass(this.options.disabledArrowClass);this.left.removeClass(this.options.disabledArrowClass)}}}});var InputMasker={options:{parentEl:"main",inputMaskTriggerSelector:".inputmasker",maskIdSuffix:"-mask"},initialize:function(){this.masks={};this.findInputMasks();window.addEvent("addNewMasks",this.findInputMasks.bind(this));window.addEvent("addNewMask",(function(B,A){this.addInputMask(B,A)}.bind(this)))},findInputMasks:function(){this.inputs=$$("#"+this.options.parentEl+" "+this.options.inputMaskTriggerSelector);if(this.inputs&&this.inputs.length>0){this.inputs.each(function(A,B){this.addInputMask(A)},this)}},addInputMask:function(D,C){var B=D.get("id");if(B&&(!this.masks[B]||C)){var A=$(B+this.options.maskIdSuffix);if(A){var E={};E.inputEl=D.addEvents({focus:function(){this.showHideMask(B,true)}.bind(this),blur:function(){this.showHideMask(B,false)}.bind(this)});E.inputId=B;E.maskEl=A.set("tween",{link:"cancel"}).addEvent("click",function(){D.focus()});E.showingMask=false;this.masks[B]=E;if(!D.hasClass("focused")){this.showHideMask(B,false)}}}},showHideMask:function(A,B){if(!B&&!this.masks[A].showingMask&&this.masks[A].inputEl.get("value")==""){this.masks[A].maskEl.fade("hide").setStyle("display","").fade("in");this.masks[A].showingMask=true}else{if(this.masks[A].showingMask){this.masks[A].maskEl.setStyle("display","none");this.masks[A].showingMask=false}}}};InputMasker.initialize();var SimpleExpander=new Class({Implements:[Options,Events],options:{changeTriggerHtml:false,inlineTrigger:true,colapseTriggerHtml:"",addStateClass:false,expandedClass:"expanded",contractedClass:"contracted"},initialize:function(A,D,C,B){this.setOptions(B);this.parentElement=$(A);this.expandElement=$(D);this.trigger=$(C);this.expanded=false;this.expandHeight=false;this.parentElement.set("tween",{link:"cancel"});if(this.trigger){this.triggerExpandHtml=this.trigger.get("html");this.trigger.addEvent("click",function(E){E.stop();this[(this.expanded)?"contract":"expand"]()}.bind(this));this.fireEvent("loaded")}},contract:function(){if(!this.expandHeight){this.getHeights()}this.parentElement.get("tween").start("height",this.colapsedHeight).chain(function(){this.expandElement.setStyle("display","none");this.fireEvent("contracted")}.bind(this));if(this.options.changeTriggerHtml){this.trigger.set("html",this.triggerExpandHtml)}if(this.options.addStateClass){this.parentElement.addClass(this.options.contractedClass).removeClass(this.options.expandedClass)}this.expanded=false},expand:function(){if(!this.expandHeight){this.getHeights()}this.fireEvent("expanding");this.expandElement.setStyles({visibility:"",display:""});this.parentElement.get("tween").start("height",[this.colapsedHeight,this.expandHeight]).chain(function(){this.fireEvent("expanded")}.bind(this));if(this.options.changeTriggerHtml){this.trigger.set("html",this.options.colapseTriggerHtml)}if(this.options.addStateClass){this.parentElement.removeClass(this.options.contractedClass).addClass(this.options.expandedClass)}this.expanded=true},getHeights:function(){this.colapsedHeight=this.parentElement.getSize().y-this.parentElement.getStyle("padding-top").toInt()-this.parentElement.getStyle("padding-bottom").toInt();this.parentElement.setStyle("height",this.colapsedHeight);this.expandElement.setStyles({display:"",visibility:"visible"});if(this.options.inlineTrigger){this.expandHeight=this.trigger.getCoordinates(this.parentElement).bottom}else{this.expandHeight=this.colapsedHeight+(this.expandElement.getSize().y-this.expandElement.getStyle("padding-top").toInt()-this.expandElement.getStyle("padding-bottom").toInt())}}});var ArticleExpander=new Class({Implements:[Options,Events],options:{changeTriggerHtml:false,colapseTriggerHtml:"",addStateClass:false,expandedClass:"expanded",contractedClass:"contracted",duration:1000},initialize:function(A,D,E,C,B){this.setOptions(B);this.parentElement=$(A);this.expandElements=$$(".expandable");if(!this.expandElements){return }this.count=this.expandElements.length;this.expandHeights=[];this.trigger=$(C);this.expanded=false;this.expandHeight=false;this.expandElements.set("tween",{link:"cancel",duration:this.options.duration});if(this.trigger){this.triggerExpandHtml=this.trigger.get("html");this.trigger.addEvent("click",function(F){F.stop();this[(this.expanded)?"contract":"expand"]()}.bind(this));this.fireEvent("loaded")}},contract:function(){this.fireEvent("contracting");this.expandElements.each(function(A,B){if(B+1==this.count){A.get("tween").start("height",0).chain(function(){this.fireEvent("contracted")}.bind(this))}else{A.tween("height",0)}},this);if(this.options.changeTriggerHtml){this.trigger.set("html",this.triggerExpandHtml)}if(this.options.addStateClass){this.parentElement.addClass(this.options.contractedClass).removeClass(this.options.expandedClass)}this.expanded=false},expand:function(){if(!this.expandHeights.length){this.getHeights()}this.fireEvent("expanding");this.expandElements.each(function(A,B){if(B+1==this.count){A.get("tween").start("height",this.expandHeights[B]).chain(function(){this.fireEvent("expanded")})}else{A.tween("height",this.expandHeights[B])}},this);this.expanded=true;if(this.options.changeTriggerHtml){this.trigger.set("html",this.options.colapseTriggerHtml)}if(this.options.addStateClass){this.parentElement.removeClass(this.options.contractedClass).addClass(this.options.expandedClass)}},getHeights:function(){this.colapsedHeight=this.parentElement.getSize().y-this.parentElement.getStyle("padding-top").toInt()-this.parentElement.getStyle("padding-bottom").toInt();this.parentElement.setStyle("height",this.colapsedHeight);var A=this.parentElement.getSize().x;this.expandElements.each(function(B,C){B.setStyles({display:"",visibility:"hidden",overflow:"hidden",position:"absolute",width:A});this.expandHeights[C]=B.getSize().y;B.setStyles({display:"",height:0,visibility:"visible",position:"",width:""})},this);this.parentElement.setStyle("height","auto")}});window.addEvent("domready",function(){$$(".googlecustomsearch").each(function(D){var F=D.q,C=D.s,B=location;var A=function(){if(D.value==""&&!D.hasClass("focused")){D.style.background="#FFFFFF url(//www.google.com/coop/images/google_custom_search_watermark.gif) left no-repeat"}else{D.style.background="#ffffff"}};var E=function(){D.style.background="#ffffff"};D.addEvents({focus:E,blur:A});A()})});$$(".noautocomplete").setProperty("autocomplete","off");var Mongo={Campaign:{recordEvent:function(E,G,A,D,F){if(D){D=true}else{D=false}var B={cref:E,id:G,event:A,unique:D};if(F){var C=Cookie.read("campaign_tracking");C=JSON.decode(C);if($type(C)!="array"){C=[]}C.push(B);Cookie.write("campaign_tracking",JSON.encode(C),{path:"/"})}else{new Request({url:"/?__call=CampaignAnalytics"}).post(B)}},recordPageView:function(A,B){Mongo.Campaign.recordEvent(A,B,"pageviews",true)},recordImpression:function(A,B){Mongo.Campaign.recordEvent(A,B,"impressions",true)}},Demographics:{record:function(A){new Request({url:"/?__call=DemographicAnalytics"}).post(A)}}};window.addEvent("domready",function(){var A=Cookie.read("campaign_tracking");if(A){Cookie.dispose("campaign_tracking",{path:"/"});A=JSON.decode(A);if($type(A)=="array"){A.each(function(B){if(typeof (B.cref)!="undefined"&&typeof (B.id)!="undefined"&&typeof (B.event)!="undefined"){Mongo.Campaign.recordEvent(B.cref,B.id,B.event,B.unique,false)}})}}});var TopTabs={options:{positionParentId:null,positionWidthParentId:"main",parentId:"sky-neckup",navBarSelector:".navigation",tabClass:"menu-item",openClass:"open",mouseinClass:"hover",dropdownLinksClass:"tab-links",dropdownLinkNumColumns:2,dropdownLinkMinSplitSize:8,dropdownParentId:"neckup-dropdowns",dropdownPrefix:"tab-dropdown-",dropdownContentsClass:"dropdown-content",accountParentId:"top",shadowWidth:7,mouseEnterDelay:100,mouseLeaveDelay:500,fadeDuration:500,useShadows:false,useFade:true,useShim:true,useAnalyticsOnDropdowns:true,disableFadeForIE:true,applyFixesForIE6:true,displayNoneWhenDone:true,debug:false},initialize:function(){this.parentEl=$(this.options.parentId)||$(document.body);this.positionParentEl=$(this.options.positionParentId)||$(document.body);this.positionWidthParentEl=$(this.options.positionWidthParentId)||$(document.body);this.dropdownParentEl=$(this.options.dropdownParentId);this.tabs=this.parentEl.getElements("."+this.options.tabClass);if(this.tabs.length==0||!this.dropdownParentEl){return }if(Browser.ie&&Browser.version<=9){this.options.useShadows=true}if(this.options.disableFadeForIE&&Browser.ie&&Browser.version<=8){this.options.useFade=false}if(this.options.applyFixesForIE6&&Browser.ie&&Browser.version<=6){this.options.useShadows=false;this.options.shadowWidth=1;this.options.useShim=true}this.dropdowns={};this.shimPositions={};this.holdOpens={};this.statuses={};this.setups={};this.setupTweens={};this.timers={};this.fxs={};this.inputs={};this.openIndex=false;this.highestIndex=8000;var A=this;this.tabs.each(function(B,C){var D=A.dropdownParentEl.getElement("#"+A.options.dropdownPrefix+B.get("id"));if(!D){var D=$(A.options.accountParentId).getElement("#"+A.options.dropdownPrefix+B.get("id"));if(D){A.dropdownParentEl.adopt(D)}}if(D){A.dropdowns[C]=D;A.statuses[C]="closed";A.setups[C]=false;A.setupTweens[C]=false;B.addEvents({mouseenter:function(){A.enter(C)},mouseleave:function(){A.leave(C)},click:function(){if(B.hasClass("clickopens")){A.enter(C)}}});D.addEvents({mouseenter:function(){A.enter(C)},mouseleave:function(){A.leave(C)}});A.inputs[C]=D.getElements("input[type=text]");if(A.inputs[C]){A.inputs[C].addEvents({focus:function(){A.holdOpens[C]=true},blur:function(){A.holdOpens[C]=false}})}if(A.options.useAnalyticsOnDropdowns){A.attachAnalytics(B.get("id"),D)}if(A.options.useShadows){D.addClass("fancy");A.addManualShadowEls(C)}if(B.hasClass("hover")){A.enter(C)}}});window.addEvent("resize",function(){for(var B in A.setups){A.setups[B]=false}});this.shim=null;if(this.options.useShim){this.shim=new Element("iframe",{src:"about:blank",scrolling:"no",frameborder:0,width:0,height:0,styles:{"z-index":this.getHighestIndex(),position:"absolute",border:"none",top:0,left:0,width:0,height:0,opacity:0.05}});this.shim.inject(this.dropdownParentEl,"top")}},addManualShadowEls:function(A){if(!this.dropdowns[A].hasClass("imageshadow")){this.dropdowns[A].addClass("imageshadow").adopt(new Element("div",{"class":"dropdown-gutter-left"}).adopt(new Element("div",{"class":"dropdown-gutter-right"}).adopt(this.dropdowns[A].getElement("."+this.options.dropdownContentsClass))),new Element("div",{"class":"dropdown-bottom-left"}),new Element("div",{"class":"dropdown-bottom-right"}))}},attachAnalytics:function(A,C){var B=A.match("-([^-]+)$")[1];C.getElements("a").each(function(D){D.addEvent("click",function(F){var E=D.get("html");if(/^<img/.test(E)){E="featured-image-"+D.getElement("img").get("src").match("/([^/]+)$")[1]}Cookie.write("sprop10","top-tab-dropdown-click-"+B+"-"+E.replace(/\s/g,"-"),{path:"/"})})})},debug:function(){if(this.options.debug){console.log(arguments)}},enter:function(B){$clear(this.timers[B]);var A=this.options.mouseEnterDelay;var C=false;if(this.openIndex!==false&&this.openIndex!=B){A=0;C=true;this.closeAll(B,C)}if(!this.setups[B]){this.setup(B)}this.timers[B]=this.openDropdown.delay(A,this,[B,C])},leave:function(A){$clear(this.timers[A]);if(!this.holdOpens[A]){this.timers[A]=this.closeDropdown.delay(this.options.mouseLeaveDelay,this,A)}},openDropdown:function(A,B){if(this.statuses[A]=="opened"&&(this.dropdowns[A].getStyle("display")=="none"||this.dropdowns[A].getStyle("opacity")==0)){this.statuses[A]="closed"}if(this.statuses[A]!="opening"&&this.statuses[A]!="opened"){this.statuses[A]="opening";this.openIndex=A;this.sendToTop(this.dropdowns[A]);this.positionShim(A);$$(this.dropdowns[A],this.tabs[A]).addClass(this.options.openClass);if(this.dropdowns[A].getStyle("display")=="none"){this.dropdowns[A].setStyles({display:"block"})}if(this.options.useFade&&!B){if(this.dropdowns[A].getStyle("visibility")=="hidden"){this.dropdowns[A].setStyles({opacity:0,visibility:"visible"})}this.dropdowns[A].tween("opacity",1)}else{this.dropdowns[A].setStyles({opacity:1,visibility:"visible"});this.openComplete(A)}}},closeDropdown:function(A,B){if(this.statuses[A]!="closing"&&this.statuses[A]!="closed"){if(this.openIndex==A){this.openIndex=false}this.tabs[A].removeClass(this.options.openClass);this.statuses[A]="closing";if(this.holdOpens[A]&&this.inputs[A]){this.inputs[A].each(function(C){C.blur()})}if(this.options.useFade&&!B){this.dropdowns[A].tween("opacity",0)}else{this.closeComplete(A)}}},closeAll:function(A,B){$H(this.statuses).each(function(C,D){if(D!=A&&(C=="opened"||C=="opening")){$clear(this.timers[D]);this.closeDropdown(D,B)}},this)},setup:function(B){var A=this;if(!this.setupTweens[B]){this.dropdowns[B].set("tween",{link:"cancel",duration:this.options.fadeDuration,onComplete:function(){if(A.statuses[B]=="closing"){A.closeComplete(B)}else{A.openComplete(B)}}});this.setupTweens[B]=true}this.positionDropdown(B);this.setups[B]=true},closeComplete:function(A){this.dropdowns[A].removeClass(this.options.openClass);if(this.options.displayNoneWhenDone){this.dropdowns[A].setStyle("display","none")}else{this.dropdowns[A].setStyle("visibility","hidden")}this.statuses[A]="closed";if(this.openIndex===false&&this.options.useShim){this.shim.setStyles({width:0,height:0})}},openComplete:function(A){this.statuses[A]="opened";this.openIndex=A},positionDropdown:function(B){if(!this.dropdowns[B].hasClass("dontsplit")){this.divideLinks(B)}this.dropdowns[B].setStyles({visibility:"hidden",display:"block",position:"absolute"}).addClass(this.options.openClass);if(this.options.useShadows){this.adjustBottomShadow(B)}var D=this.tabs[B].getCoordinates(this.positionParentEl),E=this.dropdowns[B].getElement("."+this.options.dropdownContentsClass)||this.dropdowns[B],I=E.getCoordinates(this.positionParentEl),C={position:"absolute",top:D.bottom,left:"",right:""},F=this.tabs[B].getCoordinates(this.positionWidthParentEl),A=this.positionWidthParentEl.getSize().x,G=this.positionParentEl.getSize().x;E.setStyle("width",(I.width-E.getStyle("padding-left").toInt()-E.getStyle("padding-right").toInt()));if((F.left+I.width)<A){C.left=D.left;if(this.options.useShadows){C.left=C.left-this.options.shadowWidth}}else{C.right=G-D.right;if(this.options.useShadows){C.right=C.right-this.options.shadowWidth}}this.dropdowns[B].setStyles(C);if(this.options.useShim){var H=this.dropdowns[B].getCoordinates(this.positionParentEl);H.width+=10;H.left-=5;H.height+=5;this.shimPositions[B]=H}this.dropdowns[B].setStyle("display","none")},divideLinks:function(G){var C=this.dropdowns[G].getElement("."+this.options.dropdownLinksClass);if(!C){return }var E=this.dropdowns[G].getElements("ul").addClass("iefix");if(E){if(E.length>1){C.addClass("two-col")}else{if(E.length==1){var F=E[0].getElements("li");if(F.length<=this.options.dropdownLinkMinSplitSize){return }var D=Math.ceil(F.length/this.options.dropdownLinkNumColumns);var H=new Element("div",{"class":C.get("class")});for(var B=0;B<this.options.dropdownLinkNumColumns;B++){var A=new Element("ul",{"class":"col"+(B+1)+" iefix"});A.adopt(F.slice(B*D,((B+1)*D)));H.adopt(A)}H.addClass("two-col").replaces(C)}}}},positionShim:function(A){if(this.options.useShim){if(!this.shimPositions[A]){this.positionDropdown(A)}this.shim.setStyles(this.shimPositions[A])}},adjustBottomShadow:function(D){var C=30;var A=this.dropdowns[D].getElement(".dropdown-bottom-left");var B=this.dropdowns[D].getCoordinates().width;var E=B-C;if(E){A.setStyle("width",E+"px")}else{return }},sendToTop:function(A){A.setStyle("z-index",this.getHighestIndex())},getHighestIndex:function(){if(this.highestIndex>0){return this.highestIndex++}this.highestIndex=8000;return this.highestIndex}};TopTabs.initialize();if($$("."+TopTabs.options.tabClass)){$$("."+TopTabs.options.tabClass).each(function(A){if($(TopTabs.options.dropdownPrefix+A.get("id"))){return }A.addEvent("mouseenter",function(){TopTabs.closeAll(-1,true);return true})})}var getEncodedClassVar=function(C,D){var B=null;if(C){var A=C.get("class");if(A){A.split(" ").each(function(E){if(E.test("^"+D)){B=E.replace(D,"")}})}}return B};Element.implement({highlightTerm:function(C,B,A){var D=new RegExp("(<[^>]*>)|(\\b"+C.escapeRegExp()+")",B?"ig":"g");return this.set("html",this.get("html").replace(D,function(F,E,G){return(F.charAt(0)=="<")?F:'<strong class="'+A+'">'+G+"</strong>"}))}});var vs=$$(".videopopup");if(vs){vs.addEvent("click",function(E){var D=this.get("href");if(D.test(/\?v=/i)&&D.test("youtube.com")){if(E){E.stop()}var A=640,C=360,B=D.split("?v=")[1];if(B.test("&")){B=B.split("&")[0]}if(this.hasClass("480p")){A=854;C=480}if(this.hasClass("720p")){A=1280;C=720}var F='<iframe width="'+A+'" height="'+C+'" src="http://www.youtube.com/embed/'+B+'?hd=1&autoplay=1&egm=0&rel=0&wmode=transparent" frameborder="0" allowfullscreen autoplay="1" hd="1"></iframe>';new popcontroller({contents:F,type:"blue",initialWidth:(A+80)}).popit()}});vs.each(function(A){if(A.hasClass("autoplay")){A.fireEvent("click")}})}window.addEvents({domready:function(){if("googletag" in window){var B=$$(".ad");if(B){B.addEvent("refresh",function(){var D=this.get("id").replace("ad-","");if(window.adslot[D]){googletag.pubads().refresh([window.adslot[D]])}})}}var A=$$(".adtype-driver");if(A){A.each(function(D){C(D)})}function C(E,F){if(!F){F=1}if(E&&"getElement" in E){var H=E.getElement("iframe");if(H){var G=false,D=false;if(H.contentWindow&&H.contentWindow.document&&H.contentWindow.document.body){if("scrollHeight" in H.contentWindow.document.body){G=H.contentWindow.document.body.scrollHeight}else{if("offsetHeight" in H.contentWindow.document.body){G=H.contentWindow.document.body.offsetHeight}}if("scrollWidth" in H.contentWindow.document.body){D=H.contentWindow.document.body.scrollWidth}if(G){if(G>H.getSize().y){H.setStyle("height",G).setProperty("height",G)}}if(D){if(D>H.getSize().x){H.setStyle("width",D).setProperty("width",D)}}if(F!=100){C.delay(700,this,[E,100])}return true}}}else{if(!E){return false}E=document.id(E)}if(F>7){return false}C.delay(500,this,[E,++F])}},refreshAds:function(C){C=C||15;window.last_ad_refresh=window.last_ad_refresh||false;var A=new Date();if(window.last_ad_refresh&&(A.getTime()-window.last_ad_refresh.getTime())<C*1000){return }window.last_ad_refresh=A;if("googletag" in window&&"refreshables" in googletag){googletag.pubads().refresh(googletag.refreshables)}var B=$$(".AdObsolete .refreshable iframe");if(B&&B.length){B.each(function(D){if(!D||!D.src){return }D.src=D.src})}}});Onloads.add(function(A){A.addEvent("click",function(C){C.stop();var B=new popcontroller({loadFromAjax:true,loadModalName:"Modal_Login",title:"Login",type:"blue",initialWidth:Onloads.getOption("login-modal-width",385)});B.popit()})},$$(".modal-login"));Onloads.add(function(A){A.addEvent("click",function(B){var C=false;new popcontroller({loadFromAjax:true,disableScroll:false,loadModalName:"Modal_Registration",loadFromUrl:window.location.pathname,title:"",type:"blue",initialWidth:850,extraGetObject:{type:getEncodedClassVar(this,"registration-type-")},onSuccessfulCompletion:function(){C=true},onClosing:function(){if(C){window.location.reload()}}}).popit();if(B&&B.stop){B.stop()}})},$$(".modal-registration"));Onloads.add(function(A){A.addEvent("click",function(B){new popcontroller({loadFromAjax:true,disableScroll:false,loadModalName:"Modal_Registration",loadFromUrl:"/",title:"",type:"blue",initialWidth:850,extraGetObject:{type:getEncodedClassVar(this,"registration-type-")},onSuccessfulCompletion:function(){success=true},onClosing:function(){if(success){window.location.reload()}}}).popit();if(B&&B.stop){B.stop()}})},$$(".modal-registration-blog"));Onloads.add(function(A){A.addEvent("click",function(B){new popcontroller({loadFromAjax:true,disableScroll:false,loadModalName:"Modal_RegistrationSchoolfinder",loadFromUrl:window.location.pathname,title:"",type:"blue",initialWidth:452,extraGetObject:{type:getEncodedClassVar(this,"registration-type-")},onSuccessfulCompletion:function(){success=true},onClosing:function(){if(success){window.location.reload()}}}).popit();if(B&&B.stop){B.stop()}})},$$(".modal-registration-schoolfinder"));Onloads.add(function(A){A.addEvent("click",function(B){new popcontroller({loadFromAjax:true,loadModalName:"Modal_EditMember",loadFromUrl:window.location.pathname,title:"",initialWidth:705,fullsize:true,type:"blue",disableScroll:false}).popit();if(B&&B.stop){B.stop()}})},$$(".modal-profile-editor"));Onloads.add("click",function(A){A.stop();this.getParent("form").submit()},$("search-btn"));if(typeof (Image)=="undefined"){Image=function(){return document.createElement("img")}}Event.Mock=function(C,A){var B=window.event;A=A||"click";if(document.createEvent){B=document.createEvent("HTMLEvents");B.initEvent(A,false,true)}B=new Event(B);B.target=C;return B};